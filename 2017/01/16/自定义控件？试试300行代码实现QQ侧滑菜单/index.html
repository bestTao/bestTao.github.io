<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="å¯ä»¥è¯´æ˜¯ ViewDragHelper çš„æœ€ä½³å®è·µ">
<meta name="keywords" content="Android,è‡ªå®šä¹‰æ§ä»¶">
<meta property="og:type" content="article">
<meta property="og:title" content="QQ 6.x æŠ½å±‰èœå•">
<meta property="og:url" content="https://qiantao94.github.io/2017/01/16/è‡ªå®šä¹‰æ§ä»¶ï¼Ÿè¯•è¯•300è¡Œä»£ç å®ç°QQä¾§æ»‘èœå•/index.html">
<meta property="og:site_name" content="Salama">
<meta property="og:description" content="å¯ä»¥è¯´æ˜¯ ViewDragHelper çš„æœ€ä½³å®è·µ">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://lc-gold-cdn.xitu.io/7e87f12fd3f252b119d1.gif?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://lc-gold-cdn.xitu.io/b2d745f1dd49c5331524.png?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://lc-gold-cdn.xitu.io/48d0d02b811e9966e655.png?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://lc-gold-cdn.xitu.io/21792363be1f2ffce9b3.png?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://lc-gold-cdn.xitu.io/818eeb8270fe6ca23852.gif?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://lc-gold-cdn.xitu.io/db3ed31c0a16a0584720.png?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://ws1.sinaimg.cn/large/82890cf6ly1g0svkchadyj20nw0nw40x.jpg">
<meta property="og:updated_time" content="2019-03-06T03:04:35.647Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="QQ 6.x æŠ½å±‰èœå•">
<meta name="twitter:description" content="å¯ä»¥è¯´æ˜¯ ViewDragHelper çš„æœ€ä½³å®è·µ">
<meta name="twitter:image" content="https://lc-gold-cdn.xitu.io/7e87f12fd3f252b119d1.gif?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>QQ 6.x æŠ½å±‰èœå•</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">ä¸»é¡µ</a></li>
         
          <li><a href="/archives/">åˆ—è¡¨</a></li>
         
          <li><a href="/emmm/">ç‰¢éªš</a></li>
         
          <li><a href="/about/">æˆ‘</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2018/01/04/Generate-Android-proguard-dictionary/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2016/12/18/ã€Šç¼–å†™å¯è¯»ä»£ç çš„è‰ºæœ¯ã€‹-è¯»ä¹¦ç¬”è®°/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://qiantao94.github.io/2017/01/16/è‡ªå®šä¹‰æ§ä»¶ï¼Ÿè¯•è¯•300è¡Œä»£ç å®ç°QQä¾§æ»‘èœå•/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://qiantao94.github.io/2017/01/16/è‡ªå®šä¹‰æ§ä»¶ï¼Ÿè¯•è¯•300è¡Œä»£ç å®ç°QQä¾§æ»‘èœå•/&text=QQ 6.x æŠ½å±‰èœå•"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://qiantao94.github.io/2017/01/16/è‡ªå®šä¹‰æ§ä»¶ï¼Ÿè¯•è¯•300è¡Œä»£ç å®ç°QQä¾§æ»‘èœå•/&title=QQ 6.x æŠ½å±‰èœå•"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://qiantao94.github.io/2017/01/16/è‡ªå®šä¹‰æ§ä»¶ï¼Ÿè¯•è¯•300è¡Œä»£ç å®ç°QQä¾§æ»‘èœå•/&is_video=false&description=QQ 6.x æŠ½å±‰èœå•"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=QQ 6.x æŠ½å±‰èœå•&body=Check out this article: https://qiantao94.github.io/2017/01/16/è‡ªå®šä¹‰æ§ä»¶ï¼Ÿè¯•è¯•300è¡Œä»£ç å®ç°QQä¾§æ»‘èœå•/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://qiantao94.github.io/2017/01/16/è‡ªå®šä¹‰æ§ä»¶ï¼Ÿè¯•è¯•300è¡Œä»£ç å®ç°QQä¾§æ»‘èœå•/&title=QQ 6.x æŠ½å±‰èœå•"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://qiantao94.github.io/2017/01/16/è‡ªå®šä¹‰æ§ä»¶ï¼Ÿè¯•è¯•300è¡Œä»£ç å®ç°QQä¾§æ»‘èœå•/&title=QQ 6.x æŠ½å±‰èœå•"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://qiantao94.github.io/2017/01/16/è‡ªå®šä¹‰æ§ä»¶ï¼Ÿè¯•è¯•300è¡Œä»£ç å®ç°QQä¾§æ»‘èœå•/&title=QQ 6.x æŠ½å±‰èœå•"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://qiantao94.github.io/2017/01/16/è‡ªå®šä¹‰æ§ä»¶ï¼Ÿè¯•è¯•300è¡Œä»£ç å®ç°QQä¾§æ»‘èœå•/&title=QQ 6.x æŠ½å±‰èœå•"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://qiantao94.github.io/2017/01/16/è‡ªå®šä¹‰æ§ä»¶ï¼Ÿè¯•è¯•300è¡Œä»£ç å®ç°QQä¾§æ»‘èœå•/&name=QQ 6.x æŠ½å±‰èœå•&description=&lt;p&gt;å¯ä»¥è¯´æ˜¯ ViewDragHelper çš„æœ€ä½³å®è·µ&lt;br&gt;"><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#é¦–å…ˆ"><span class="toc-number">1.</span> <span class="toc-text">é¦–å…ˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç¡®å®šç›®æ ‡åŠæ–¹å‘"><span class="toc-number">2.</span> <span class="toc-text">ç¡®å®šç›®æ ‡åŠæ–¹å‘</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¸ºæ»‘åŠ¨åšå‡†å¤‡"><span class="toc-number">3.</span> <span class="toc-text">ä¸ºæ»‘åŠ¨åšå‡†å¤‡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#main-çš„æ»‘åŠ¨"><span class="toc-number">4.</span> <span class="toc-text">main çš„æ»‘åŠ¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#menuçš„æ»‘åŠ¨"><span class="toc-number">5.</span> <span class="toc-text">menuçš„æ»‘åŠ¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç»™-main-åŠ ä¸ªæ»‘åŠ¨æ¸å˜é˜´å½±"><span class="toc-number">6.</span> <span class="toc-text">ç»™ main åŠ ä¸ªæ»‘åŠ¨æ¸å˜é˜´å½±</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#è¿˜éœ€è¦ä¸€äº›ä¼˜åŒ–"><span class="toc-number">7.</span> <span class="toc-text">è¿˜éœ€è¦ä¸€äº›ä¼˜åŒ–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å†™åœ¨æœ€å"><span class="toc-number">8.</span> <span class="toc-text">å†™åœ¨æœ€å</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        QQ 6.x æŠ½å±‰èœå•
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Salama</span>
      </span>
      
    <div class="postdate">
        <time datetime="2017-01-16T11:36:01.000Z" itemprop="datePublished">2017-01-16</time>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Android/">Android</a>, <a class="tag-link" href="/tags/è‡ªå®šä¹‰æ§ä»¶/">è‡ªå®šä¹‰æ§ä»¶</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>å¯ä»¥è¯´æ˜¯ ViewDragHelper çš„æœ€ä½³å®è·µ<br><a id="more"></a><br>Android è‡ªå®šä¹‰æ§ä»¶å¹¶æ²¡æœ‰ä»€ä¹ˆæ·å¾„å¯èµ°ï¼Œéœ€è¦ä¸æ–­å¾—æ¨¡ä»¿ç»ƒä¹ æ‰èƒ½å‡ºå¸ˆã€‚è¿™å…¶ä¸­è¿›è¡Œæ¨¡ä»¿ç»ƒä¹ çš„ demo çš„é€‰æ‹©æ˜¯è‡³å…³é‡è¦çš„ï¼Œæœ€ä¼˜é€‰æ‹©è«è¿‡äºå®˜æ–¹çš„æ§ä»¶äº†ï¼Œä½†æ˜¯å®˜æ–¹æ§ä»¶åŠ¨è¾„å°±æ˜¯å‡ åƒè¡Œä»£ç å¾€å¾€å¯èƒ½å®¹æ˜“è®©äººæœ›è€Œå´æ­¥ã€‚æœ¬æ–‡ä»‹ç»å¦‚ä½•ç†è§£å¹¶å®ç° Android ç«¯çš„ QQ æŠ½å±‰èœå•ã€‚<br>é¦–å…ˆä¸Šå®Œæˆçš„æ•ˆæœå›¾ï¼š</p>
<div align="center"><br>    <img src="https://lc-gold-cdn.xitu.io/7e87f12fd3f252b119d1.gif?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" max-width="80%"><br></div>

<h2 id="é¦–å…ˆ"><a href="#é¦–å…ˆ" class="headerlink" title="é¦–å…ˆ"></a>é¦–å…ˆ</h2><p>æœ¬æ–‡å¹¶ä¸ä¼šé•¿ç¯‡å¤§è®ºçš„è®²è§£è‡ªå®šä¹‰æ§ä»¶æ‰€éœ€è¦çš„ä»ç»˜å›¾ã€å±å¹•åæ ‡ç³»ã€æ»‘åŠ¨åˆ°åŠ¨ç”»ç­‰åŸç†ï¼Œå› ä¸ºæˆ‘ç›¸ä¿¡æ— è®ºä½ æ˜¯å¦ä¼šè‡ªå®šä¹‰æ§ä»¶ï¼Œè¿™äº›åŸç†ä½ éƒ½å·²ç»ä»åˆ«å¤„çƒ‚ç†Ÿäºå¿ƒäº†ã€‚ä½†æ˜¯ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œä¼šåœ¨å®ç°çš„è¿‡ç¨‹ä¸­è¿›è¡Œç©¿æ’è®²è§£ã€‚</p>
<h2 id="ç¡®å®šç›®æ ‡åŠæ–¹å‘"><a href="#ç¡®å®šç›®æ ‡åŠæ–¹å‘" class="headerlink" title="ç¡®å®šç›®æ ‡åŠæ–¹å‘"></a>ç¡®å®šç›®æ ‡åŠæ–¹å‘</h2><p>åŠ¨æ‰‹æ’¸ä»£ç å‰ï¼Œæˆ‘ä»¬çœ‹ä¸€çœ¼è¿™ä¸ªæ•ˆæœã€‚é¦–å…ˆç¡®å®šæˆ‘ä»¬çš„ç›®æ ‡æ˜¯éœ€è¦è‡ªå®šä¹‰ä¸€ä¸ª ViewGroupï¼Œéœ€è¦æ§åˆ¶å®ƒçš„ä¸¤ä¸ªå­ View è¿›è¡Œæ»‘åŠ¨å˜æ¢ã€‚è¿›ä¸€æ­¥è§‚å¯Ÿæˆ‘ä»¬å¯ä»¥å‘ç°ä¸¤ä¸ªå­ View æ˜¯å åŠ å†ä¸€èµ·çš„ï¼Œæ‰€ä»¥ä¸ºäº†å‡å°‘ä»£ç æˆ‘ä»¬å¯ä»¥è€ƒè™‘ç›´æ¥ç»§æ‰¿äº ViewGroup çš„ä¸€ä¸ªå®ç°ç±»ï¼š<code>FrameLayout</code>ã€‚åº•å±‚çš„æ˜¯èœå•è§†å›¾<code>menu</code>ï¼Œå åŠ åœ¨ä¸Šé¢çš„æ˜¯ä¸»ç•Œé¢ <code>main</code>ã€‚<br>æ–°å»ºä¸€ä¸ªç±»ï¼š<code>CoordinatorMenu</code>ï¼Œå¹¶åœ¨åŠ è½½å¸ƒå±€åæ‹¿åˆ°ä¸¤ä¸ªå­ View<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CoordinatorMenu</span> <span class="keyword">extends</span> <span class="title">FrameLayout</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> View mMenuView;</span><br><span class="line">    <span class="keyword">private</span> View mMainView;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åŠ è½½å®Œå¸ƒå±€æ–‡ä»¶åè°ƒç”¨</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onFinishInflate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        mMenuView = getChildAt(<span class="number">0</span>);<span class="comment">//ç¬¬ä¸€ä¸ªå­ View åœ¨åº•å±‚ï¼Œä½œä¸º menu</span></span><br><span class="line">        mMainView = getChildAt(<span class="number">1</span>);<span class="comment">//ç¬¬äºŒä¸ªå­ View åœ¨ä¸Šå±‚ï¼Œä½œä¸º main</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="ä¸ºæ»‘åŠ¨åšå‡†å¤‡"><a href="#ä¸ºæ»‘åŠ¨åšå‡†å¤‡" class="headerlink" title="ä¸ºæ»‘åŠ¨åšå‡†å¤‡"></a>ä¸ºæ»‘åŠ¨åšå‡†å¤‡</h2><p>å®ç°æ‰‹æŒ‡è·Ÿéšæ»‘åŠ¨ï¼Œè¿™å…¶ä¸­æœ‰å¾ˆå¤šæ–¹æ³•ï¼Œæœ€åŸºæœ¬çš„è«è¿‡äºé‡å†™ <code>onTouchEvent</code> æ–¹æ³•å¹¶é…åˆ <code>Scroller</code> å®ç°äº†ï¼Œä½†æ˜¯è¿™ä¹Ÿæ˜¯æœ€å¤æ‚çš„äº†ã€‚è¿˜å¥½å®˜æ–¹æä¾›äº†ä¸€ä¸ª <code>ViewDragHelper</code> ç±»å¸®åŠ©æˆ‘ä»¬å»å®ç°ï¼ˆæœ¬è´¨ä¸Šè¿˜æ˜¯ä½¿ç”¨Scrollerï¼‰ã€‚<br>åœ¨æˆ‘ä»¬çš„æ„é€ æ–¹æ³•ä¸­é€šè¿‡ <code>ViewDragHelper</code> é™æ€æ–¹æ³•è¿›è¡Œå…¶åˆå§‹åŒ–ï¼š<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">mViewDragHelper = ViewDragHelper.create(</span><br><span class="line">    <span class="keyword">this</span>,</span><br><span class="line">    TOUCH_SLOP_SENSITIVITY,</span><br><span class="line">    <span class="keyword">new</span> CoordinatorCallback());</span><br></pre></td></tr></table></figure></p>
<p>ä¸‰ä¸ªå‚æ•°çš„å«ä¹‰ï¼š</p>
<ul>
<li>éœ€è¦ç›‘å¬çš„ Viewï¼Œè¿™é‡Œå°±æ˜¯å½“å‰çš„æ§ä»¶</li>
<li>å¼€å§‹è§¦æ‘¸æ»‘åŠ¨çš„æ•æ„Ÿåº¦ï¼Œå€¼è¶Šå¤§è¶Šæ•æ„Ÿï¼Œ1.0f æ˜¯æ­£å¸¸å€¼</li>
<li>ä¸€ä¸ª Callback å›è°ƒï¼Œæ•´ä¸ª ViewDragHelper çš„æ ¸å¿ƒé€»è¾‘æ‰€åœ¨ï¼Œè¿™é‡Œè‡ªå®šä¹‰äº†ä¸€ä¸ªå®ƒçš„å®ç°ç±»</li>
</ul>
<p>ç„¶åæ‹¦æˆªè§¦æ‘¸äº‹ä»¶ï¼Œäº¤ç»™æˆ‘ä»¬çš„ä¸»è§’ <code>ViewDragHelper</code> å¤„ç†ï¼š<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onInterceptTouchEvent</span><span class="params">(MotionEvent ev)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> mViewDragHelper.shouldInterceptTouchEvent(ev);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouchEvent</span><span class="params">(MotionEvent event)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//å°†è§¦æ‘¸äº‹ä»¶ä¼ é€’ç»™ ViewDragHelperï¼Œæ­¤æ“ä½œå¿…ä¸å¯å°‘</span></span><br><span class="line">    mViewDragHelper.processTouchEvent(event);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å¤„ç† <code>computeScroll</code> æ–¹æ³•ï¼š<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ»‘åŠ¨è¿‡ç¨‹ä¸­è°ƒç”¨</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">computeScroll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (mViewDragHelper.continueSettling(<span class="keyword">true</span>)) &#123;</span><br><span class="line">        ViewCompat.postInvalidateOnAnimation(<span class="keyword">this</span>);<span class="comment">//å¤„ç†åˆ·æ–°ï¼Œå®ç°å¹³æ»‘ç§»åŠ¨</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å¤„ç†éƒ¨åˆ†Callbackå›è°ƒ<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å‘Šè¯‰ ViewDragHelper å¯¹å“ªä¸ªå­ View è¿›è¡Œæ‹–åŠ¨æ»‘åŠ¨</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">tryCaptureView</span><span class="params">(View child, <span class="keyword">int</span> pointerId)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ä¾§æ»‘èœå•é»˜è®¤æ˜¯å…³é—­çš„</span></span><br><span class="line">    <span class="comment">//ç”¨æˆ·å¿…å®šåªèƒ½å…ˆè§¦æ‘¸çš„åˆ°ä¸Šå±‚çš„ä¸»ç•Œé¢</span></span><br><span class="line">    <span class="keyword">return</span> mMainView == child;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿›è¡Œæ°´å¹³æ–¹å‘æ»‘åŠ¨</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">clampViewPositionHorizontal</span><span class="params">(View child, <span class="keyword">int</span> left, <span class="keyword">int</span> dx)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> left;<span class="comment">//é€šå¸¸è¿”å› left å³å¯ï¼Œleft æŒ‡ä»£æ­¤ view çš„å·¦è¾¹ç¼˜çš„ä½ç½®</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="main-çš„æ»‘åŠ¨"><a href="#main-çš„æ»‘åŠ¨" class="headerlink" title="main çš„æ»‘åŠ¨"></a>main çš„æ»‘åŠ¨</h2><p>è¿™æ ·æˆ‘ä»¬å°±èƒ½åœ¨æ°´å¹³æ–¹å‘ä¸Šéšæ„æ‹–åŠ¨ä¸Šå±‚çš„å­ View â€“ <code>main</code> äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯é™åˆ¶å®ƒæ°´å¹³æ»‘åŠ¨çš„èŒƒå›´äº†ï¼ŒèŒƒå›´å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<div align="center"><br>    <img src="https://lc-gold-cdn.xitu.io/b2d745f1dd49c5331524.png?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"><br></div>

<p>æ”¹å†™ä¸Šé¢çš„æ°´å¹³æ»‘åŠ¨æ–¹æ³•ï¼Œ<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">clampViewPositionHorizontal</span><span class="params">(View child, <span class="keyword">int</span> left, <span class="keyword">int</span> dx)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (left &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        left = <span class="number">0</span>;<span class="comment">//åˆå§‹ä½ç½®æ˜¯å±å¹•çš„å·¦è¾¹ç¼˜</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (left &gt; mMenuWidth) &#123;</span><br><span class="line">        left = mMenuWidth;<span class="comment">//æœ€è¿œçš„è·ç¦»å°±æ˜¯èœå•æ å®Œå…¨å±•å¼€åçš„ menu çš„å®½åº¦</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> left;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>å¢åŠ å›å¼¹æ•ˆæœï¼š</strong></p>
<ul>
<li>å½“èœå•å…³é—­ï¼Œä»å·¦å‘å³æ»‘åŠ¨ <code>main</code> çš„æ—¶å€™ï¼Œå°äºä¸€å®šè·ç¦»æ¾å¼€æ‰‹ï¼Œéœ€è¦è®©å®ƒå›å¼¹åˆ°æœ€å·¦è¾¹ï¼Œå¦åˆ™ç›´æ¥æ‰“å¼€èœå•</li>
<li>å½“èœå•å®Œå…¨æ‰“å¼€ï¼Œä»å³å‘å·¦æ»‘åŠ¨ <code>main</code> çš„æ—¶å€™ï¼Œå°äºä¸€å®šè·ç¦»æ¾å¼€æ‰‹ï¼Œéœ€è¦è®©å®ƒå›å¼¹åˆ°æœ€å³è¾¹ï¼Œå¦åˆ™ç›´æ¥å…³é—­èœå•</li>
</ul>
<p>é¦–å…ˆåˆ¤æ–­æ»‘åŠ¨çš„æ–¹å‘ï¼š<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å½“ view ä½ç½®æ”¹å˜æ—¶è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯æ‹–åŠ¨çš„æ—¶å€™</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onViewPositionChanged</span><span class="params">(View changedView, <span class="keyword">int</span> left, <span class="keyword">int</span> top, <span class="keyword">int</span> dx, <span class="keyword">int</span> dy)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//dx ä»£è¡¨è·ç¦»ä¸Šä¸€ä¸ªæ»‘åŠ¨æ—¶é—´é—´éš”åçš„æ»‘åŠ¨è·ç¦»</span></span><br><span class="line">    <span class="keyword">if</span> (dx &gt; <span class="number">0</span>) &#123;<span class="comment">//æ­£</span></span><br><span class="line">        mDragOrientation = LEFT_TO_RIGHT;<span class="comment">//ä»å·¦å¾€å³</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (dx &lt; <span class="number">0</span>) &#123;<span class="comment">//è´Ÿ</span></span><br><span class="line">        mDragOrientation = RIGHT_TO_LEFT;<span class="comment">//ä»å³å¾€å·¦</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>åœ¨æ¾å¼€æ‰‹åï¼š<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//View é‡Šæ”¾åè°ƒç”¨</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onViewReleased</span><span class="params">(View releasedChild, <span class="keyword">float</span> xvel, <span class="keyword">float</span> yvel)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onViewReleased(releasedChild, xvel, yvel);</span><br><span class="line">    <span class="keyword">if</span> (mDragOrientation == LEFT_TO_RIGHT) &#123;<span class="comment">//ä»å·¦å‘å³æ»‘</span></span><br><span class="line">        <span class="keyword">if</span> (mMainView.getLeft() &lt; mSpringBackDistance) &#123;<span class="comment">//å°äºè®¾å®šçš„è·ç¦»</span></span><br><span class="line">            closeMenu();<span class="comment">//å…³é—­èœå•</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            openMenu();<span class="comment">//å¦åˆ™æ‰“å¼€èœå•</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (mDragOrientation == RIGHT_TO_LEFT) &#123;<span class="comment">//ä»å³å‘å·¦æ»‘</span></span><br><span class="line">        <span class="keyword">if</span> (mMainView.getLeft() &lt; mMenuWidth - mSpringBackDistance)&#123;<span class="comment">//å°äºè®¾å®šçš„è·ç¦»</span></span><br><span class="line">            closeMenu();<span class="comment">//å…³é—­èœå•</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            openMenu();<span class="comment">//å¦åˆ™æ‰“å¼€èœå•</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">openMenu</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    mViewDragHelper.smoothSlideViewTo(mMainView, mMenuWidth, <span class="number">0</span>);</span><br><span class="line">    ViewCompat.postInvalidateOnAnimation(CoordinatorMenu.<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">closeMenu</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    mViewDragHelper.smoothSlideViewTo(mMainView, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    ViewCompat.postInvalidateOnAnimation(CoordinatorMenu.<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="menuçš„æ»‘åŠ¨"><a href="#menuçš„æ»‘åŠ¨" class="headerlink" title="menuçš„æ»‘åŠ¨"></a>menuçš„æ»‘åŠ¨</h2><p>å±•å¼€åï¼Œæˆ‘ä»¬å°±å¯ä»¥è§¦æ‘¸åˆ°åº•å±‚çš„ <code>menu</code> è§†å›¾äº†ï¼Œæˆ‘ä»¬æ‹½ <code>menu</code> ä¸èƒ½æ‹–åŠ¨å®ƒæœ¬èº«ï¼Œä¹Ÿä¸èƒ½æ‹–åŠ¨ <code>main</code>ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨å‰é¢æŒ‡å®šäº†è§¦æ‘¸åªä½œç”¨äº <code>main</code>ã€‚æˆ‘ä»¬å¯ä»¥å…ˆæ€è€ƒä¸€ä¸‹ï¼ŒQQ çš„ä¾§æ»‘èœå•åº•å±‚æ˜¯è·Ÿéšä¸Šå±‚ç§»åŠ¨çš„ï¼ˆç»†å¿ƒçš„ä½ ä¼šå‘ç°ä¸æ˜¯å®Œå…¨è·Ÿéšçš„ï¼Œå®ƒä»¬ä¹‹é—´çš„è·ç¦»å˜åŒ–æœ‰ä¸ªçº¿æ€§å…³ç³»ï¼Œè¿™ä¸ªç¨åå†è¯´ï¼‰ï¼Œè¿™æ ·çš„è¯é‚£æˆ‘ä»¬å°±å¯ä»¥æŠŠ <code>menu</code> å®Œå…¨æ‰˜ä»˜ç»™ <code>main</code> å¤„ç†ï¼Œåˆ†ä¸¤æ­¥ï¼š1. <code>menu</code> æ‰˜ä»˜ç»™ <code>main</code>; 2. <code>main</code> æ»‘åŠ¨æ—¶ç®¡ç† <code>menu</code> çš„æ»‘åŠ¨ã€‚<br>é¦–å…ˆæˆ‘ä»¬è¦å…ˆç¡®å®š <code>menu</code> çš„åˆå§‹ä½ç½®åŠå¤§å°ï¼Œé‡å†™ <code>layout</code> æ–¹æ³•ï¼Œå‘å·¦åç§»ä¸€ä¸ª <code>mMenuOffset</code><br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onLayout</span><span class="params">(<span class="keyword">boolean</span> changed, <span class="keyword">int</span> left, <span class="keyword">int</span> top, <span class="keyword">int</span> right, <span class="keyword">int</span> bottom)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onLayout(changed, left, top, right, bottom);</span><br><span class="line">    MarginLayoutParams menuParams = (MarginLayoutParams) mMenuView.getLayoutParams();</span><br><span class="line">    menuParams.width = mMenuWidth;</span><br><span class="line">    mMenuView.setLayoutParams(menuParams);</span><br><span class="line">    mMenuView.layout(-mMenuOffset, top, mMenuWidth - mMenuOffset, bottom);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>æˆ‘ä»¬å…ˆå®ç°ç¬¬ä¸€æ­¥ï¼šè§¦æ‘¸åˆ° <code>menu</code>ï¼Œäº¤ç»™ <code>main</code> å¤„ç†ã€‚</strong><br>åœ¨è¿™ä¹‹å‰æ”¹å†™å‰é¢çš„å›è°ƒæ–¹æ³•ï¼Œè®© <code>menu</code> èƒ½æ¥å—è§¦æ‘¸äº‹ä»¶<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">tryCaptureView</span><span class="params">(View child, <span class="keyword">int</span> pointerId)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> mMainView == child || mMenuView == child;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç„¶å<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è§‚å¯Ÿè¢«è§¦æ‘¸çš„ view</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onViewCaptured</span><span class="params">(View capturedChild, <span class="keyword">int</span> activePointerId)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (capturedChild == mMenuView) &#123;<span class="comment">//å½“è§¦æ‘¸çš„ view æ˜¯ menu</span></span><br><span class="line">        mViewDragHelper.captureChildView(mMainView, activePointerId);<span class="comment">//äº¤ç»™ main å¤„ç†</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>åœ¨è¿™ä¸€æ­¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æ‰‹æŒ‡è§¦æ‘¸åˆ° <code>menu</code> çš„æ—¶å€™ï¼Œæ‹–åŠ¨ <code>main</code>ã€‚<br><del>è¿™ä¸ªæ„Ÿè§‰å°±åƒæ˜¯æŒ‡æ¡‘éª‚æ§ï¼ŒæŒ‡ç€çš„æ˜¯ <code>menu</code>ï¼Œéª‚çš„å´æ˜¯ <code>main</code>ï¼Œå“ˆå“ˆã€‚</del></p>
<p><strong>æ¥ä¸‹æ¥æˆ‘ä»¬å®ç°ç¬¬äºŒæ­¥ï¼Œ<code>menu</code> è·Ÿéš <code>main</code> æ»‘åŠ¨</strong><br>å…ˆçœ‹ä¸‹é¢ <code>menu</code> ä¸ <code>main</code> çš„ä½ç½®å…³ç³»å›¾</p>
<div align="center"><br>    <img src="https://lc-gold-cdn.xitu.io/48d0d02b811e9966e655.png?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"><br></div>

<p>å¾ˆæ˜æ˜¾æˆ‘ä»¬èƒ½å¾—å‡ºä¸€ä¸ªç»“è®ºï¼š</p>
<blockquote>
<p>ä» menu å…³é—­åˆ° menu çš„æ‰“å¼€ï¼šmenu ç§»åŠ¨äº†å®ƒçš„åˆå§‹å‘å·¦åç§»è·ç¦» <code>mMenuOffset</code>ï¼Œmain ç§»åŠ¨äº†çš„è·ç¦»æ­£å¥½æ˜¯ menu çš„å®½åº¦ <code>mMenuWidth</code></p>
</blockquote>
<p>æ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥ç”¨ä¹‹å‰ç”¨åˆ°çš„å›è°ƒï¼š<code>onViewPositionChanged(View changedView, int left, int top, int dx, int dy)</code>ï¼Œå› ä¸ºè¿™é‡Œçš„ <code>dx</code> æ­£æ˜¯æŒ‡ä»£ç§»åŠ¨è·ç¦»ï¼Œåªè¦ <code>main</code> ç§»åŠ¨äº†ä¸€ä¸ª <code>dx</code>ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥è®© <code>menu</code> ç§»åŠ¨ä¸€ä¸ª <code>dx * mMenuOffset / mMenuWidth</code>ï¼Œä¸å°±è¡Œäº†å—ï¼Ÿ<br>çœ‹èµ·æ¥ååˆ†ç¾å¥½ï¼Œå®è·µèµ·æ¥å´æ˜¯No!No!No!ï¼Œå› ä¸ºéœ€è¦å¯¹ <code>menu</code> ä½¿ç”¨<code>layout</code> æ–¹æ³•è¿›è¡Œé‡æ–°å¸ƒå±€ä»¥è¾¾åˆ°ç§»åŠ¨æ•ˆæœï¼Œè€Œè¿™ä¸ªæ–¹æ³•ä¼ è¿›å»çš„å€¼æ˜¯<strong>int</strong>å‹ï¼Œè€Œæˆ‘ä»¬ä¸Šé¢çš„è®¡ç®—å…¬å¼çš„ç»“æœå¾ˆæ˜æ˜¾æ˜¯ä¸ª<strong>float</strong>ï¼Œå†µä¸”å¾ˆä¸å·§çš„æ˜¯è¿™ä¸ª <code>dx</code> æ˜¯æŒ‡ <strong>ä»£è¡¨è·ç¦»ä¸Šä¸€ä¸ªæ»‘åŠ¨æ—¶é—´é—´éš”åçš„æ»‘åŠ¨è·ç¦»</strong>ï¼Œå°±æ˜¯æŠŠä½ æ•´ä¸ªæ»‘åŠ¨è¿‡ç¨‹åˆ†å‰²æˆå¾ˆå¤šçš„å°å—ï¼Œæ¯ä¸€å°å—çš„æ—¶é—´å¾ˆçŸ­ï¼Œå¦‚æœä½ æ»‘åŠ¨å¾ˆæ…¢çš„è¯ï¼Œé‚£ä¹ˆåœ¨è¿™å¾ˆçŸ­çš„æ—¶é—´å†… <code>dx=1</code> ï¼Œfuxk ã€‚æ‰€ä»¥è¿™æ ·è®¡ç®—çš„è¯ç²¾åº¦ä¸¥é‡ä¸¢å¤±ï¼Œä¸èƒ½è¾¾åˆ°åŒæ­¥ç§»åŠ¨çš„æ•ˆæœã€‚<br>æ‰€ä»¥æˆ‘ä»¬åªèƒ½æ¢ä¸€ç§æ€ç»´ï¼Œä½¿ç”¨å®ƒä»¬ä¹‹é—´çš„å¦ä¸€ç§å…³ç³»ï¼š<code>menu</code> å·¦è¾¹ç¼˜å’Œ<code>main</code> å·¦è¾¹ç¼˜ä¹‹é—´çš„è·ç¦»æ˜¯ç”± <code>mMenuOffset</code> å¢åŠ åˆ° <code>mMenuWidth</code>ï¼Œæ­¤æ—¶ <code>main</code> ç§»åŠ¨äº† <code>mMenuWidth</code>ã€‚å¯ä»¥è®¤ä¸ºè¿™ç§å¢åŠ æ˜¯çº¿æ€§çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<div align="center"><br>    <img src="https://lc-gold-cdn.xitu.io/21792363be1f2ffce9b3.png?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"><br></div>

<p>æ ¹æ®å›¾åŠå…¬å¼ <code>y = kx + d</code> å¾—å‡ºï¼š<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">mainLeft - menuLeft = (mMenuWidth - mMenuOffset) / mMenuWidth * mainLeft</span><br><span class="line">+ mMenuOffset</span><br></pre></td></tr></table></figure></p>
<p>æ‰€ä»¥è¿™æ ·é‡å†™å›è°ƒ <code>onViewPositionChanged</code> å³å¯ä½¿ <code>menu</code> è·Ÿéš<code>main</code> è¿›è¡Œæ»‘åŠ¨å˜æ¢ï¼š<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onViewPositionChanged</span><span class="params">(View changedView, <span class="keyword">int</span> left, <span class="keyword">int</span> top, <span class="keyword">int</span> dx, <span class="keyword">int</span> dy)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">float</span> scale = (<span class="keyword">float</span>) (mMenuWidth - mMenuOffset) / (<span class="keyword">float</span>) mMenuWidth;</span><br><span class="line">    <span class="keyword">int</span> menuLeft = left - ((<span class="keyword">int</span>) (scale * left) + mMenuOffset);</span><br><span class="line">    mMenuView.layout(menuLeft, mMenuView.getTop(),</span><br><span class="line">            menuLeft + mMenuWidth, mMenuView.getBottom());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç›¸ä¿¡å¦‚æœæˆ‘æ²¡æœ‰ç»™å‡ºä¸Šé¢çš„æ•°å­¦å…³ç³»è§£ç­”ï¼Œç›´æ¥çœ‹ä»£ç ï¼Œä½ å¯èƒ½ä¼šä¸€è„¸æ‡µé€¼ï¼Œè¿™ä¹Ÿæ˜¯å¾ˆå¤šè‡ªå®šä¹‰æ§ä»¶æºç éš¾è¯»çš„åŸå› ã€‚</p>
<h2 id="ç»™-main-åŠ ä¸ªæ»‘åŠ¨æ¸å˜é˜´å½±"><a href="#ç»™-main-åŠ ä¸ªæ»‘åŠ¨æ¸å˜é˜´å½±" class="headerlink" title="ç»™ main åŠ ä¸ªæ»‘åŠ¨æ¸å˜é˜´å½±"></a>ç»™ main åŠ ä¸ªæ»‘åŠ¨æ¸å˜é˜´å½±</h2><p>ç»è¿‡ä¸Šé¢çš„æ“ä½œï¼Œæ„Ÿè§‰æ€»ä½“å·²ç»æœ‰äº†æ¨¡æ ·äº†ï¼Œä½†è¿˜ç¼ºå°‘ä¸€æ ·ä¸œè¥¿ï¼Œå°±æ˜¯ <code>main</code> ç»è¿‡èœå•ç”±å…³é—­åˆ°å®Œå…¨æ‰“å¼€çš„è¿‡ç¨‹ä¸­ï¼Œä¼šæœ‰ä¸€å±‚é€æ˜åˆ°ä¸é€æ˜å˜åŒ–çš„é˜´å½±ï¼Œçœ‹ä¸‹é¢åŠ¨å›¾æ¼”ç¤ºï¼š</p>
<div align="center"><br>    <img src="https://lc-gold-cdn.xitu.io/818eeb8270fe6ca23852.gif?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"><br></div>

<p>å®ç°è¿™ä¸ªåŠŸèƒ½æˆ‘ä»¬éœ€è¦çŸ¥é“ ViewGroup é€šè¿‡è°ƒç”¨å…¶ <code>drawChild</code> æ–¹æ³•å¯¹å­ view æŒ‰é¡ºåºåˆ†åˆ«è¿›è¡Œç»˜åˆ¶ï¼Œæ‰€ä»¥åœ¨ç»˜åˆ¶å®Œ <code>menu</code> å’Œ <code>main</code> åï¼Œæˆ‘ä»¬éœ€è¦ç»˜åˆ¶ä¸€å±‚å·¦è¾¹ç¼˜éš <code>main</code> å˜åŒ–ä¸”ä¸Šè¾¹ç¼˜ã€å³è¾¹ç¼˜å’Œä¸‹è¾¹ç¼˜ä¸å˜çš„è§†å›¾ï¼Œè€Œä¸”è¿™ä¸ªè§†å›¾çš„é€æ˜åº¦ä¹Ÿä¼šå˜åŒ–ã€‚<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">drawChild</span><span class="params">(Canvas canvas, View child, <span class="keyword">long</span> drawingTime)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">boolean</span> result = <span class="keyword">super</span>.drawChild(canvas, child, drawingTime);<span class="comment">//å®ŒæˆåŸæœ‰çš„å­viewï¼šmenuå’Œmainçš„ç»˜åˆ¶</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> shadowLeft = mMainView.getLeft();<span class="comment">//é˜´å½±å·¦è¾¹ç¼˜ä½ç½®</span></span><br><span class="line">    <span class="keyword">final</span> Paint shadowPaint = <span class="keyword">new</span> Paint();<span class="comment">//é˜´å½±ç”»ç¬”</span></span><br><span class="line">    shadowPaint.setColor(Color.parseColor(<span class="string">"#"</span> + mShadowOpacity + <span class="string">"777777"</span>));<span class="comment">//ç»™ç”»ç¬”è®¾ç½®é€æ˜åº¦å˜åŒ–çš„é¢œè‰²</span></span><br><span class="line">    shadowPaint.setStyle(Paint.Style.FILL);<span class="comment">//è®¾ç½®ç”»ç¬”ç±»å‹å¡«å……</span></span><br><span class="line">    canvas.drawRect(shadowLeft, <span class="number">0</span>, mScreenWidth, mScreenHeight, shadowPaint);<span class="comment">//ç”»å‡ºé˜´å½±</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å…¶ä¸­è¿™ä¸ª <code>mShadowOpacity</code> æ˜¯éš <code>main</code> çš„ä½ç½®å˜åŒ–è€Œå˜åŒ–çš„ï¼š<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> String mShadowOpacity = <span class="string">"00"</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onViewPositionChanged</span><span class="params">(View changedView, <span class="keyword">int</span> left, <span class="keyword">int</span> top, <span class="keyword">int</span> dx, <span class="keyword">int</span> dy)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">float</span> showing = (<span class="keyword">float</span>) (mScreenWidth - left) / (<span class="keyword">float</span>) mScreenWidth;</span><br><span class="line">    <span class="keyword">int</span> hex = <span class="number">255</span> - Math.round(showing * <span class="number">255</span>);</span><br><span class="line">    <span class="keyword">if</span> (hex &lt; <span class="number">16</span>) &#123;</span><br><span class="line">        mShadowOpacity = <span class="string">"0"</span> + Integer.toHexString(hex);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        mShadowOpacity = Integer.toHexString(hex);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è‡³æ­¤æˆ‘ä»¬çš„èœå•å¯ä»¥è¯´æ˜¯å®Œå·¥äº†ï¼Œbutï¼</p>
<h2 id="è¿˜éœ€è¦ä¸€äº›ä¼˜åŒ–"><a href="#è¿˜éœ€è¦ä¸€äº›ä¼˜åŒ–" class="headerlink" title="è¿˜éœ€è¦ä¸€äº›ä¼˜åŒ–"></a>è¿˜éœ€è¦ä¸€äº›ä¼˜åŒ–</h2><p>1.å¦‚æœæ‰“å¼€èœå•ï¼Œç†„å±ï¼Œå†äº®å±ï¼Œæ­¤æ—¶èœå•å°±åˆæ¢å¤åˆ°å…³é—­çš„çŠ¶æ€äº†ï¼Œå› ä¸ºé‡æ–°äº®å±åï¼Œ<code>layout</code> æ–¹æ³•ä¼šé‡æ–°è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬çš„å­ view ä¼šé‡æ–°å¸ƒå±€ï¼Œæ‰€ä»¥è¦æ”¹å†™è¿™ä¸ªæ–¹æ³•ï¼š<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onLayout</span><span class="params">(<span class="keyword">boolean</span> changed, <span class="keyword">int</span> left, <span class="keyword">int</span> top, <span class="keyword">int</span> right, <span class="keyword">int</span> bottom)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onLayout(changed, left, top, right, bottom);</span><br><span class="line">    MarginLayoutParams menuParams = (MarginLayoutParams) mMenuView.getLayoutParams();</span><br><span class="line">    menuParams.width = mMenuWidth;</span><br><span class="line">    mMenuView.setLayoutParams(menuParams);</span><br><span class="line">    <span class="keyword">if</span> (mMenuState == MENU_OPENED) &#123;<span class="comment">//åˆ¤æ–­èœå•çš„çŠ¶æ€ä¸ºæ‰“å¼€çš„è¯</span></span><br><span class="line">        <span class="comment">//ä¿æŒæ‰“å¼€çš„ä½ç½®</span></span><br><span class="line">        mMenuView.layout(<span class="number">0</span>, <span class="number">0</span>, mMenuWidth, bottom);</span><br><span class="line">        mMainView.layout(mMenuWidth, <span class="number">0</span>, mMenuWidth + mScreenWidth, bottom);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    mMenuView.layout(-mMenuOffset, top, mMenuWidth - mMenuOffset, bottom);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–èœå•çš„çŠ¶æ€</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">computeScroll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (mMainView.getLeft() == <span class="number">0</span>) &#123;</span><br><span class="line">        mMenuState = MENU_CLOSED;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (mMainView.getLeft() == mMenuWidth) &#123;</span><br><span class="line">        mMenuState = MENU_OPENED;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>2.æ—‹è½¬å±å¹•ä¹Ÿä¼šå‡ºç°ä¸Šè¿°çš„é—®é¢˜ï¼Œè¿™æ—¶å°±éœ€è¦è°ƒç”¨ <code>onSaveInstanceState</code> å’Œ <code>onRestoreInstanceState</code> è¿™ä¸¤ä¸ªæ–¹æ³•åˆ†åˆ«ç”¨æ¥ä¿å­˜å’Œæ¢å¤æˆ‘ä»¬èœå•çš„çŠ¶æ€ã€‚<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SavedState</span> <span class="keyword">extends</span> <span class="title">AbsSavedState</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> menuState;<span class="comment">//è®°å½•èœå•çŠ¶æ€çš„å€¼</span></span><br><span class="line"></span><br><span class="line">    SavedState(Parcel in, ClassLoader loader) &#123;</span><br><span class="line">        <span class="keyword">super</span>(in, loader);</span><br><span class="line">        menuState = in.readInt();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">writeToParcel</span><span class="params">(Parcel dest, <span class="keyword">int</span> flags)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.writeToParcel(dest, flags);</span><br><span class="line">        dest.writeInt(menuState);</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">    ...</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> Parcelable <span class="title">onSaveInstanceState</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> Parcelable superState = <span class="keyword">super</span>.onSaveInstanceState();</span><br><span class="line">    <span class="keyword">final</span> CoordinatorMenu.SavedState ss = <span class="keyword">new</span> CoordinatorMenu.SavedState(superState);</span><br><span class="line">    ss.menuState = mMenuState;<span class="comment">//ä¿å­˜çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">return</span> ss;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onRestoreInstanceState</span><span class="params">(Parcelable state)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!(state <span class="keyword">instanceof</span> CoordinatorMenu.SavedState)) &#123;</span><br><span class="line">        <span class="keyword">super</span>.onRestoreInstanceState(state);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> CoordinatorMenu.SavedState ss = (CoordinatorMenu.SavedState) state;</span><br><span class="line">    <span class="keyword">super</span>.onRestoreInstanceState(ss.getSuperState());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (ss.menuState == MENU_OPENED) &#123;<span class="comment">//è¯»å–åˆ°çš„çŠ¶æ€æ˜¯æ‰“å¼€çš„è¯</span></span><br><span class="line">        openMenu();<span class="comment">//æ‰“å¼€èœå•</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>2.<strong>é¿å…è¿‡åº¦ç»˜åˆ¶</strong>ã€‚<code>menu</code> å’Œ <code>main</code> åœ¨æ»‘åŠ¨è¿‡ç¨‹ä¸­ä¼šæœ‰é‡å éƒ¨åˆ†ï¼Œé‡å éƒ¨åˆ†ä¹Ÿå°±æ˜¯ <code>menu</code> è¢«é®ç›–çš„éƒ¨åˆ†ï¼Œæ˜¯ä¸éœ€è¦å†ç»˜åˆ¶çš„ï¼Œæˆ‘ä»¬åªéœ€è¦ç»˜åˆ¶æ˜¾ç¤ºå‡ºæ¥çš„ <code>menu</code> éƒ¨åˆ†ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p>
<div align="center"><br>    <img src="https://lc-gold-cdn.xitu.io/db3ed31c0a16a0584720.png?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"><br></div>

<p>åœ¨ <code>drawChild</code> æ–¹æ³•ä¸­å¢åŠ ä»¥ä¸‹ä»£ç <br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> <span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">drawChild</span><span class="params">(Canvas canvas, View child, <span class="keyword">long</span> drawingTime)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">int</span> restoreCount = canvas.save();<span class="comment">//ä¿å­˜ç”»å¸ƒå½“å‰çš„å‰ªè£ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">int</span> height = getHeight();</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">int</span> clipLeft = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> clipRight = mMainView.getLeft();</span><br><span class="line">    <span class="keyword">if</span> (child == mMenuView) &#123;</span><br><span class="line">        canvas.clipRect(clipLeft, <span class="number">0</span>, clipRight, height);<span class="comment">//å‰ªè£æ˜¾ç¤ºçš„åŒºåŸŸ</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">boolean</span> result = <span class="keyword">super</span>.drawChild(canvas, child, drawingTime);<span class="comment">//ç»˜åˆ¶å½“å‰ view</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ¢å¤ç”»å¸ƒä¹‹å‰ä¿å­˜çš„å‰ªè£ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">//ä»¥æ­£å¸¸ç»˜åˆ¶ä¹‹åçš„ view</span></span><br><span class="line">    canvas.restoreToCount(restoreCount);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h2><p>è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ä¾§æ»‘èœå•å³å®ç°äº†åŠŸèƒ½ï¼Œåˆä¼˜åŒ–å¹¶å¤„ç†äº†äº›ç»†èŠ‚ã€‚å¦‚æœæœ‰æ—¶å€™é‡åˆ°åŠŸèƒ½ä¸çŸ¥é“æ€ä¹ˆå®ç°ï¼Œå…¶å®æœ€å¥½çš„è§£å†³æ–¹å‘å°±æ˜¯å…ˆçœ‹çœ‹å®˜æ–¹æœ‰æ²¡æœ‰å®ç°è¿‡è¿™æ ·çš„åŠŸèƒ½ï¼Œå†å»ä»–ä»¬çš„æºç é‡Œå¯»æ‰¾ç­”æ¡ˆï¼Œæ¯”å¦‚è¯´æˆ‘è¿™é‡Œå®ç°çš„é˜´å½±ç»˜åˆ¶ä»¥åŠè¿‡åº¦ç»˜åˆ¶ä¼˜åŒ–éƒ½æ˜¯å‚ç…§äºå®˜æ–¹æ§ä»¶ <code>DrawerLayout</code>ï¼Œé˜…è¯»å®˜æ–¹æºç ä¸ä»…èƒ½è®©ä½ å®ç°åŠŸèƒ½ï¼Œè¿˜èƒ½æ¿€å‘ä½ å¹¶æ”¹å–„ä½ çš„ä»£ç è´¨é‡ï¼Œä¼šæœ‰ä¸€ç§ <code>å§æ§½ï¼Œä»£ç åŸæ¥åº”è¯¥è¿™ä¹ˆå†™</code> çš„æ„Ÿå¹ã€‚</p>
<blockquote>
<p>æœ¬æ–‡æºç åœ°å€ï¼š<a href="https://github.com/bestTao/CoordinatorMenu" target="_blank" rel="noopener">https://github.com/bestTao/CoordinatorMenu</a>ï¼Œ<strong>æœ‰é—®é¢˜æ¬¢è¿æissue</strong>ã€‚</p>
</blockquote>
<p><strong>ä½ ä¹Ÿå¯ä»¥ç›´æ¥åœ¨é¡¹ç›®ä¸­å¼•å…¥è¿™ä¸ªæ§ä»¶ï¼š</strong></p>
<ol>
<li><p>å…ˆæ·»åŠ ä»¥ä¸‹ä»£ç åˆ°ä½ é¡¹ç›®ä¸­çš„æ ¹ç›®å½•çš„<code>build.gradle</code></p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"><span class="keyword">allprojects</span> &#123;</span><br><span class="line">    <span class="keyword">repositories</span> &#123;</span><br><span class="line">        ...</span><br><span class="line">        maven &#123; url <span class="string">'https://jitpack.io'</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å†å¼•å…¥ä¾èµ–å³å¯ï¼š</p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    <span class="keyword">compile</span> <span class="string">'com.github.bestTao:CoordinatorMenu:v1.0.2'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>è¯¦ç»†å†…å®¹åŠæœ€æ–°ç‰ˆæœ¬å¯ä»¥å‚è€ƒ <a href="https://github.com/bestTao/CoordinatorMenu/blob/master/README.md" target="_blank" rel="noopener">[README.md]</a></p>
<p><br><br><br></p>
<hr>
<p><strong>å…³æ³¨å…¬ä¼—å·ï¼Œäº†è§£æ›´å¤šå“¦ï½</strong>ğŸ‘‡</p>
<p><img src="https://ws1.sinaimg.cn/large/82890cf6ly1g0svkchadyj20nw0nw40x.jpg" style="float:left;width:130px"></p>
<p><br><br><br><br><br></p>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">ä¸»é¡µ</a></li>
         
          <li><a href="/archives/">åˆ—è¡¨</a></li>
         
          <li><a href="/emmm/">ç‰¢éªš</a></li>
         
          <li><a href="/about/">æˆ‘</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#é¦–å…ˆ"><span class="toc-number">1.</span> <span class="toc-text">é¦–å…ˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç¡®å®šç›®æ ‡åŠæ–¹å‘"><span class="toc-number">2.</span> <span class="toc-text">ç¡®å®šç›®æ ‡åŠæ–¹å‘</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¸ºæ»‘åŠ¨åšå‡†å¤‡"><span class="toc-number">3.</span> <span class="toc-text">ä¸ºæ»‘åŠ¨åšå‡†å¤‡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#main-çš„æ»‘åŠ¨"><span class="toc-number">4.</span> <span class="toc-text">main çš„æ»‘åŠ¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#menuçš„æ»‘åŠ¨"><span class="toc-number">5.</span> <span class="toc-text">menuçš„æ»‘åŠ¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç»™-main-åŠ ä¸ªæ»‘åŠ¨æ¸å˜é˜´å½±"><span class="toc-number">6.</span> <span class="toc-text">ç»™ main åŠ ä¸ªæ»‘åŠ¨æ¸å˜é˜´å½±</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#è¿˜éœ€è¦ä¸€äº›ä¼˜åŒ–"><span class="toc-number">7.</span> <span class="toc-text">è¿˜éœ€è¦ä¸€äº›ä¼˜åŒ–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å†™åœ¨æœ€å"><span class="toc-number">8.</span> <span class="toc-text">å†™åœ¨æœ€å</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://qiantao94.github.io/2017/01/16/è‡ªå®šä¹‰æ§ä»¶ï¼Ÿè¯•è¯•300è¡Œä»£ç å®ç°QQä¾§æ»‘èœå•/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://qiantao94.github.io/2017/01/16/è‡ªå®šä¹‰æ§ä»¶ï¼Ÿè¯•è¯•300è¡Œä»£ç å®ç°QQä¾§æ»‘èœå•/&text=QQ 6.x æŠ½å±‰èœå•"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://qiantao94.github.io/2017/01/16/è‡ªå®šä¹‰æ§ä»¶ï¼Ÿè¯•è¯•300è¡Œä»£ç å®ç°QQä¾§æ»‘èœå•/&title=QQ 6.x æŠ½å±‰èœå•"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://qiantao94.github.io/2017/01/16/è‡ªå®šä¹‰æ§ä»¶ï¼Ÿè¯•è¯•300è¡Œä»£ç å®ç°QQä¾§æ»‘èœå•/&is_video=false&description=QQ 6.x æŠ½å±‰èœå•"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=QQ 6.x æŠ½å±‰èœå•&body=Check out this article: https://qiantao94.github.io/2017/01/16/è‡ªå®šä¹‰æ§ä»¶ï¼Ÿè¯•è¯•300è¡Œä»£ç å®ç°QQä¾§æ»‘èœå•/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://qiantao94.github.io/2017/01/16/è‡ªå®šä¹‰æ§ä»¶ï¼Ÿè¯•è¯•300è¡Œä»£ç å®ç°QQä¾§æ»‘èœå•/&title=QQ 6.x æŠ½å±‰èœå•"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://qiantao94.github.io/2017/01/16/è‡ªå®šä¹‰æ§ä»¶ï¼Ÿè¯•è¯•300è¡Œä»£ç å®ç°QQä¾§æ»‘èœå•/&title=QQ 6.x æŠ½å±‰èœå•"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://qiantao94.github.io/2017/01/16/è‡ªå®šä¹‰æ§ä»¶ï¼Ÿè¯•è¯•300è¡Œä»£ç å®ç°QQä¾§æ»‘èœå•/&title=QQ 6.x æŠ½å±‰èœå•"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://qiantao94.github.io/2017/01/16/è‡ªå®šä¹‰æ§ä»¶ï¼Ÿè¯•è¯•300è¡Œä»£ç å®ç°QQä¾§æ»‘èœå•/&title=QQ 6.x æŠ½å±‰èœå•"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://qiantao94.github.io/2017/01/16/è‡ªå®šä¹‰æ§ä»¶ï¼Ÿè¯•è¯•300è¡Œä»£ç å®ç°QQä¾§æ»‘èœå•/&name=QQ 6.x æŠ½å±‰èœå•&description=&lt;p&gt;å¯ä»¥è¯´æ˜¯ ViewDragHelper çš„æœ€ä½³å®è·µ&lt;br&gt;"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2019 qiantao
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">ä¸»é¡µ</a></li>
         
          <li><a href="/archives/">åˆ—è¡¨</a></li>
         
          <li><a href="/emmm/">ç‰¢éªš</a></li>
         
          <li><a href="/about/">æˆ‘</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/fontawesome-all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-120844447-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Baidu Analytics -->

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'Salama';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


