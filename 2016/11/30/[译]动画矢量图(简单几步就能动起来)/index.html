<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="简单几步就能动起来">
<meta name="keywords" content="Android,动画,矢量图">
<meta property="og:type" content="article">
<meta property="og:title" content="[译]动画矢量图">
<meta property="og:url" content="https://qiantao94.github.io/2016/11/30/[译]动画矢量图(简单几步就能动起来)/index.html">
<meta property="og:site_name" content="Salama">
<meta property="og:description" content="简单几步就能动起来">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://d262ilb51hltx0.cloudfront.net/max/800/1*XI72aAgZON-g0F_Teo6kiA.gif">
<meta property="og:image" content="https://d262ilb51hltx0.cloudfront.net/max/800/1*c5OuwdtbvYgz23ZYNOqvyQ.png">
<meta property="og:image" content="https://d262ilb51hltx0.cloudfront.net/max/800/1*1Wedbml-isruH21ZwFJ5oA.gif">
<meta property="og:image" content="https://d262ilb51hltx0.cloudfront.net/max/1000/1*mJ7exvw2h7RNyYLJkjljQA.png">
<meta property="og:image" content="https://d262ilb51hltx0.cloudfront.net/max/1000/1*y83fxWXo_Vzp73U0fiynng.png">
<meta property="og:image" content="https://d262ilb51hltx0.cloudfront.net/max/800/1*0jHCR61TzjHSrNIoqLsFjQ.gif">
<meta property="og:updated_time" content="2018-11-06T01:28:30.102Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="[译]动画矢量图">
<meta name="twitter:description" content="简单几步就能动起来">
<meta name="twitter:image" content="https://d262ilb51hltx0.cloudfront.net/max/800/1*XI72aAgZON-g0F_Teo6kiA.gif">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>[译]动画矢量图</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">主页</a></li>
         
          <li><a href="/archives/">列表</a></li>
         
          <li><a href="/emmm/">牢骚</a></li>
         
          <li><a href="/about/">我</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2016/12/18/《编写可读代码的艺术》-读书笔记/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2016/11/25/使用RxJava帮助低功耗蓝牙(BLE)进行通信/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://qiantao94.github.io/2016/11/30/[译]动画矢量图(简单几步就能动起来)/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://qiantao94.github.io/2016/11/30/[译]动画矢量图(简单几步就能动起来)/&text=[译]动画矢量图"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://qiantao94.github.io/2016/11/30/[译]动画矢量图(简单几步就能动起来)/&title=[译]动画矢量图"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://qiantao94.github.io/2016/11/30/[译]动画矢量图(简单几步就能动起来)/&is_video=false&description=[译]动画矢量图"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=[译]动画矢量图&body=Check out this article: https://qiantao94.github.io/2016/11/30/[译]动画矢量图(简单几步就能动起来)/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://qiantao94.github.io/2016/11/30/[译]动画矢量图(简单几步就能动起来)/&title=[译]动画矢量图"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://qiantao94.github.io/2016/11/30/[译]动画矢量图(简单几步就能动起来)/&title=[译]动画矢量图"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://qiantao94.github.io/2016/11/30/[译]动画矢量图(简单几步就能动起来)/&title=[译]动画矢量图"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://qiantao94.github.io/2016/11/30/[译]动画矢量图(简单几步就能动起来)/&title=[译]动画矢量图"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://qiantao94.github.io/2016/11/30/[译]动画矢量图(简单几步就能动起来)/&name=[译]动画矢量图&description=&lt;p&gt;简单几步就能动起来&lt;br&gt;"><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#你需要做的事："><span class="toc-number">1.</span> <span class="toc-text">你需要做的事：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-在你的-build-gradle-文件中添加-AppCompat-依赖"><span class="toc-number">1.1.</span> <span class="toc-text">1.在你的 build.gradle 文件中添加 AppCompat 依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-创建vector-drawable（矢量图）文件"><span class="toc-number">1.2.</span> <span class="toc-text">2.创建vector drawable（矢量图）文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-创建动画文件"><span class="toc-number">1.3.</span> <span class="toc-text">3.创建动画文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-创建animate-vector-drawable文件"><span class="toc-number">1.4.</span> <span class="toc-text">4.创建animate-vector drawable文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-编辑你的-build-gradle-文件"><span class="toc-number">1.5.</span> <span class="toc-text">5.编辑你的 build.gradle 文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-将你的-AnimatedVectorDrawableCompat-设置到-ImageView-或者-ImageButton"><span class="toc-number">1.6.</span> <span class="toc-text">6.将你的 AnimatedVectorDrawableCompat 设置到 ImageView 或者 ImageButton</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-在你需要的时候开启动画"><span class="toc-number">1.7.</span> <span class="toc-text">7.在你需要的时候开启动画</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#好消息和坏消息"><span class="toc-number">2.</span> <span class="toc-text">好消息和坏消息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#更多"><span class="toc-number">3.</span> <span class="toc-text">更多</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        [译]动画矢量图
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Salama</span>
      </span>
      
    <div class="postdate">
        <time datetime="2016-11-30T13:06:50.000Z" itemprop="datePublished">2016-11-30</time>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Android/">Android</a>, <a class="tag-link" href="/tags/动画/">动画</a>, <a class="tag-link" href="/tags/矢量图/">矢量图</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>简单几步就能动起来<br><a id="more"></a></p>
<div style="text-align: center"><br><img src="https://d262ilb51hltx0.cloudfront.net/max/800/1*XI72aAgZON-g0F_Teo6kiA.gif"><br></div>

<p>尽管 <code>AnimatedVectorDrawableCompat</code>（自从 2016 年二月份 – Support Library 23.2.0）已经出来有一段时间了，Google 官方却一直没有提供一份使用教程。你很难搜到相关可靠的文章，也没有什么能把这个东西完完整整的呈现出来。<br>所以接下来我尝试将所有必要知识精简成你所能理解的东西。</p>
<hr>
<h2 id="你需要做的事："><a href="#你需要做的事：" class="headerlink" title="你需要做的事："></a>你需要做的事：</h2><h3 id="1-在你的-build-gradle-文件中添加-AppCompat-依赖"><a href="#1-在你的-build-gradle-文件中添加-AppCompat-依赖" class="headerlink" title="1.在你的 build.gradle 文件中添加 AppCompat 依赖"></a>1.在你的 build.gradle 文件中添加 AppCompat 依赖</h3><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"><span class="keyword">compile</span> <span class="string">'com.android.support:appcompat-v7:25.0.0'</span></span><br></pre></td></tr></table></figure>
<ul>
<li>我使用了（此时）最新版本 <code>25.0.0</code>，但是只要从 <code>23.2.0</code> 开始任何版本可以正常工作</li>
</ul>
<h3 id="2-创建vector-drawable（矢量图）文件"><a href="#2-创建vector-drawable（矢量图）文件" class="headerlink" title="2.创建vector drawable（矢量图）文件"></a>2.创建vector drawable（矢量图）文件</h3><ul>
<li>它能被赋予动画效果</li>
<li><code>vector</code> drawable文件必须被放在你项目的 res/drawable 文件夹</li>
<li>更多的相关内容点<a href="https://developer.android.com/reference/android/graphics/drawable/VectorDrawable.html" target="_blank" rel="noopener">这里</a>（译注：官方文档需科学上网）<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">vector</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:width</span>=<span class="string">"24dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:height</span>=<span class="string">"24dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:viewportHeight</span>=<span class="string">"24"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:viewportWidth</span>=<span class="string">"24"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">group</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"menu"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:pivotX</span>=<span class="string">"12"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:pivotY</span>=<span class="string">"12"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">group</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:name</span>=<span class="string">"bottom_container"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:pivotX</span>=<span class="string">"20"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:pivotY</span>=<span class="string">"17"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">path</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:name</span>=<span class="string">"bottom"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:pathData</span>=<span class="string">"M4,17,L20,17"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:strokeColor</span>=<span class="string">"#000"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:strokeLineCap</span>=<span class="string">"square"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:strokeLineJoin</span>=<span class="string">"miter"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:strokeMiterLimit</span>=<span class="string">"10"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:strokeWidth</span>=<span class="string">"2"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">group</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">group</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:name</span>=<span class="string">"stem_container"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:pivotX</span>=<span class="string">"12"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:pivotY</span>=<span class="string">"12"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">path</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:name</span>=<span class="string">"stem"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:pathData</span>=<span class="string">"M4,12,L20,12"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:strokeColor</span>=<span class="string">"#000"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:strokeLineCap</span>=<span class="string">"square"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:strokeLineJoin</span>=<span class="string">"miter"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:strokeMiterLimit</span>=<span class="string">"10"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:strokeWidth</span>=<span class="string">"2"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">group</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">group</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:name</span>=<span class="string">"top_container"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:pivotX</span>=<span class="string">"20"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:pivotY</span>=<span class="string">"7"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">path</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:name</span>=<span class="string">"top"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:pathData</span>=<span class="string">"M4,7,L20,7"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:strokeColor</span>=<span class="string">"#000"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:strokeLineCap</span>=<span class="string">"square"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:strokeLineJoin</span>=<span class="string">"miter"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:strokeMiterLimit</span>=<span class="string">"10"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:strokeWidth</span>=<span class="string">"2"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">group</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">vector</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>上面的代码描绘的是一个基础的黑色菜单（汉堡包）图标：</p>
<div style="text-align: center"><br><img src="https://d262ilb51hltx0.cloudfront.net/max/800/1*c5OuwdtbvYgz23ZYNOqvyQ.png"><br></div>

<h3 id="3-创建动画文件"><a href="#3-创建动画文件" class="headerlink" title="3.创建动画文件"></a>3.创建动画文件</h3><ul>
<li>它们指定了 <code>vector</code> 的动画部分</li>
<li>可以将多个动画分别指定给一个 <code>vector</code> drawable 的不同的部分</li>
<li><code>vector</code> 不同的部分用 <code>name</code> 标签指定（例如 <code>menu</code>, <code>bottom_container</code>, <code>bottom</code>, <code>stem_container</code>, <code>stem</code>, <code>top_container</code>, <code>top</code>）</li>
<li>动画文件根元素既可以是 <code>set</code> 也可以是 <code>objectAnimator</code></li>
<li>这些文件需要放在res/anim目录下</li>
</ul>
<p>　　接下来的代码展现了 <code>top_container</code> 动画，它定义了四个属性，<code>translateX</code>，<code>translateY</code>，<code>scaleX</code> 以及 <code>rotation</code>:<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">objectAnimator</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"top_container"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:duration</span>=<span class="string">"700"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:interpolator</span>=<span class="string">"@android:anim/accelerate_decelerate_interpolator"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:propertyName</span>=<span class="string">"translateX"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:startOffset</span>=<span class="string">"500"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:valueFrom</span>=<span class="string">"0"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:valueTo</span>=<span class="string">"-1.41421356"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:valueType</span>=<span class="string">"floatType"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">objectAnimator</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"top_container"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:duration</span>=<span class="string">"700"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:interpolator</span>=<span class="string">"@android:anim/accelerate_decelerate_interpolator"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:propertyName</span>=<span class="string">"translateY"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:startOffset</span>=<span class="string">"500"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:valueFrom</span>=<span class="string">"0"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:valueTo</span>=<span class="string">"5"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:valueType</span>=<span class="string">"floatType"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">objectAnimator</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"top_container"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:duration</span>=<span class="string">"700"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:interpolator</span>=<span class="string">"@android:anim/accelerate_decelerate_interpolator"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:propertyName</span>=<span class="string">"scaleX"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:startOffset</span>=<span class="string">"500"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:valueFrom</span>=<span class="string">"1"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:valueTo</span>=<span class="string">"0.5"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:valueType</span>=<span class="string">"floatType"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">objectAnimator</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"top_container"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:duration</span>=<span class="string">"700"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:interpolator</span>=<span class="string">"@android:anim/accelerate_decelerate_interpolator"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:propertyName</span>=<span class="string">"rotation"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:startOffset</span>=<span class="string">"500"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:valueFrom</span>=<span class="string">"0"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:valueTo</span>=<span class="string">"45"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:valueType</span>=<span class="string">"floatType"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<div style="text-align: center"><br><img src="https://d262ilb51hltx0.cloudfront.net/max/800/1*1Wedbml-isruH21ZwFJ5oA.gif"><br></div>

<h3 id="4-创建animate-vector-drawable文件"><a href="#4-创建animate-vector-drawable文件" class="headerlink" title="4.创建animate-vector drawable文件"></a>4.创建animate-vector drawable文件</h3><ul>
<li><code>animated-vector</code> 将所有的内容都联系在一起（<code>vector</code> drawable 文件和所有的 <code>animation</code> 文件）</li>
<li>需要将它放在你项目的 res/anim 目录下</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">animated-vector</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:drawable</span>=<span class="string">"@drawable/vector_menu_back"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:ignore</span>=<span class="string">"NewApi"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">target</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"top_container"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:animation</span>=<span class="string">"@anim/anim_top_container"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">target</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"stem_container"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:animation</span>=<span class="string">"@anim/anim_stem_container"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">target</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"bottom_container"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:animation</span>=<span class="string">"@anim/anim_bottom_container"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">target</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"menu"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:animation</span>=<span class="string">"@anim/anim_menu"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">animated-vector</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>需要注意的是：</strong></p>
<blockquote>
<p>如果你的 <code>minSdkVersion</code> 小于21（如果大于的话，那我真的不知道你为什么会考虑用 <code>AnimatedVectorDrawableCompat</code>…正常用 <code>AnimatedVectorDrawable</code> 就行了），Android Studio 可能会在你的 <code>animated-vector</code> 文件中弹出一个静态检查警告：</p>
</blockquote>
<div style="text-align: center"><br><img src="https://d262ilb51hltx0.cloudfront.net/max/1000/1*mJ7exvw2h7RNyYLJkjljQA.png"><br></div>

<blockquote>
<p>不要担心这个警告！如果你的代码没有错误，你的<code>AnimatedVectorDrawableCompat</code> 会忽略掉它并且能够正常工作。当然如果你不想再看到警告，可以添加 <code>tools:ignore=&quot;NewApi&quot;</code>：</p>
</blockquote>
<div style="text-align: center"><br><img src="https://d262ilb51hltx0.cloudfront.net/max/1000/1*y83fxWXo_Vzp73U0fiynng.png"><br></div>

<h3 id="5-编辑你的-build-gradle-文件"><a href="#5-编辑你的-build-gradle-文件" class="headerlink" title="5.编辑你的 build.gradle 文件"></a>5.编辑你的 build.gradle 文件</h3><ul>
<li>在你的 <code>build.gradle</code> 文件中，将 <code>vectorDrawables.useSupportLibrary = true</code> 添加进 <code>android</code> 部分的<code>defaultConfig</code> 内</li>
<li>你需要这行代码，这样你的 <code>animated-vector</code> 才能兼容API小于 Lollipop版本的系统</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">    compileSdkVersion <span class="number">24</span></span><br><span class="line">    buildToolsVersion <span class="string">"24.0.3"</span></span><br><span class="line">    defaultConfig &#123;</span><br><span class="line">        applicationId <span class="string">"com.junyuan.wukongnew"</span></span><br><span class="line">        minSdkVersion <span class="number">21</span></span><br><span class="line">        targetSdkVersion <span class="number">24</span></span><br><span class="line">        versionCode <span class="number">1</span></span><br><span class="line">        versionName <span class="string">"1.0"</span></span><br><span class="line">        vectorDrawables.useSupportLibrary = <span class="keyword">true</span></span><br><span class="line">    &#125;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-将你的-AnimatedVectorDrawableCompat-设置到-ImageView-或者-ImageButton"><a href="#6-将你的-AnimatedVectorDrawableCompat-设置到-ImageView-或者-ImageButton" class="headerlink" title="6.将你的 AnimatedVectorDrawableCompat 设置到 ImageView 或者 ImageButton"></a>6.将你的 AnimatedVectorDrawableCompat 设置到 ImageView 或者 ImageButton</h3><ul>
<li>你可以用 <code>app:srcCompat</code> 把它添加进xml文件</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/iv_animated"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"48dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"48dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:srcCompat</span>=<span class="string">"@drawable/animated_vector_menu_back"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>或者通过 java 代码：</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">final</span> AnimatedVectorDrawableCompat avd = AnimatedVectorDrawableCompat.create(<span class="keyword">this</span>, R.drawable.animated_vector_menu_back);</span><br><span class="line">        animatedIv.setImageDrawable(avd);</span><br></pre></td></tr></table></figure>
<h3 id="7-在你需要的时候开启动画"><a href="#7-在你需要的时候开启动画" class="headerlink" title="7.在你需要的时候开启动画"></a>7.在你需要的时候开启动画</h3><ul>
<li>获得 <code>AnimatedVectorDrawableCompat</code> 的引用（或者是它的一个实现类–<code>Animatable</code>），如果你的 <code>AnimatedVectorDrawableCompat</code> 是通过 java 代码添加的，可以直接使用这个对象的引用（你可以跳过这步）：</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">final</span> Animatable animatable = (Animatable) animatedIv.getDrawable();</span><br></pre></td></tr></table></figure>
<ul>
<li>开启动画</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">animatable.start()</span><br></pre></td></tr></table></figure>
<div style="text-align: center"><br><img src="https://d262ilb51hltx0.cloudfront.net/max/800/1*0jHCR61TzjHSrNIoqLsFjQ.gif"><br></div>

<hr>
<h2 id="好消息和坏消息"><a href="#好消息和坏消息" class="headerlink" title="好消息和坏消息"></a>好消息和坏消息</h2><p><strong>让我们先来听听好消息：</strong><br>　　你可以很轻松通过<a href="https://medium.com/u/90c74515fd18" target="_blank" rel="noopener">Roman Nurik</a>的<a href="https://romannurik.github.io/AndroidIconAnimator/" target="_blank" rel="noopener">AndroidIconAnimator</a>这个工具（尽管当前它是预览版，但是也足够有用了）实现步骤 1-3。它可以将 svg 文件和你所指定的动画元素转换成 <code>animated-vector</code> drawable 文件<br>　　有一件很有意思的事情是导出来的来的 <code>animated-vector</code> 文件使用了 <code>aapt</code> 工具的一些非常厉害的功能，导出来的 drawable 文件包含了全部动画所需的代码（包括 <code>vector</code> drawable 和 <code>animation</code> 文件）。就是将步骤 1-3 的所有文件都包含在一个文件里。</p>
<p><strong>坏消息来了：</strong><br>　　<code>AnimatedVectorDrawableCompat</code> 在 API 小于 21 时有一些限制:<br>　　<a href="https://medium.com/u/9303277cb6db" target="_blank" rel="noopener">Chris Banes</a>的<a href="https://medium.com/@chrisbanes/appcompat-v23-2-age-of-the-vectors-91cbafa87c88#.cs1imeq9e" target="_blank" rel="noopener">文章</a>中指出：</p>
<blockquote>
<p>animate vectors 在 API 小于 21 的平台上工作时同样有一些限制，当前在这些平台上有一下这几点限制：</p>
</blockquote>
<blockquote>
<p>路径绘制（PathType evaluator），这被用来从一个路径绘制到另一个路径</p>
</blockquote>
<blockquote>
<p>路径插值器，这被用来定义一个灵活的插值器（展现成一个路径）以代替系统自动生成的，比如说线性插值器（LinearInterpolator）</p>
</blockquote>
<blockquote>
<p>按路径移动，这很少能用到，几何图形能在限制路径上来回运动</p>
</blockquote>
<p>　　大致意思就是你可以忘了 <code>pathData</code> 元素的动画 <code>pathData</code>，我们只能期望谷歌的天才们能研究一个方法将这个功能兼容到低版本的系统上去。</p>
<hr>
<h2 id="更多"><a href="#更多" class="headerlink" title="更多"></a>更多</h2><p>　　似乎这里有个小 bug（除非这是它的特点），如果你尝试通过给 <code>animated-vector</code> 添加 <code>startOffset</code> 至你的动画，你的动画将根本不能运行起来（至少它在我这不行），它会从开始状态跳到结束状态（带有一些延迟），在所有的 <code>animated-vector</code> 中至少得有一个动画需要从开始状态运行。这是需要注意的。。。</p>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">主页</a></li>
         
          <li><a href="/archives/">列表</a></li>
         
          <li><a href="/emmm/">牢骚</a></li>
         
          <li><a href="/about/">我</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#你需要做的事："><span class="toc-number">1.</span> <span class="toc-text">你需要做的事：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-在你的-build-gradle-文件中添加-AppCompat-依赖"><span class="toc-number">1.1.</span> <span class="toc-text">1.在你的 build.gradle 文件中添加 AppCompat 依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-创建vector-drawable（矢量图）文件"><span class="toc-number">1.2.</span> <span class="toc-text">2.创建vector drawable（矢量图）文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-创建动画文件"><span class="toc-number">1.3.</span> <span class="toc-text">3.创建动画文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-创建animate-vector-drawable文件"><span class="toc-number">1.4.</span> <span class="toc-text">4.创建animate-vector drawable文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-编辑你的-build-gradle-文件"><span class="toc-number">1.5.</span> <span class="toc-text">5.编辑你的 build.gradle 文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-将你的-AnimatedVectorDrawableCompat-设置到-ImageView-或者-ImageButton"><span class="toc-number">1.6.</span> <span class="toc-text">6.将你的 AnimatedVectorDrawableCompat 设置到 ImageView 或者 ImageButton</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-在你需要的时候开启动画"><span class="toc-number">1.7.</span> <span class="toc-text">7.在你需要的时候开启动画</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#好消息和坏消息"><span class="toc-number">2.</span> <span class="toc-text">好消息和坏消息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#更多"><span class="toc-number">3.</span> <span class="toc-text">更多</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://qiantao94.github.io/2016/11/30/[译]动画矢量图(简单几步就能动起来)/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://qiantao94.github.io/2016/11/30/[译]动画矢量图(简单几步就能动起来)/&text=[译]动画矢量图"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://qiantao94.github.io/2016/11/30/[译]动画矢量图(简单几步就能动起来)/&title=[译]动画矢量图"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://qiantao94.github.io/2016/11/30/[译]动画矢量图(简单几步就能动起来)/&is_video=false&description=[译]动画矢量图"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=[译]动画矢量图&body=Check out this article: https://qiantao94.github.io/2016/11/30/[译]动画矢量图(简单几步就能动起来)/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://qiantao94.github.io/2016/11/30/[译]动画矢量图(简单几步就能动起来)/&title=[译]动画矢量图"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://qiantao94.github.io/2016/11/30/[译]动画矢量图(简单几步就能动起来)/&title=[译]动画矢量图"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://qiantao94.github.io/2016/11/30/[译]动画矢量图(简单几步就能动起来)/&title=[译]动画矢量图"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://qiantao94.github.io/2016/11/30/[译]动画矢量图(简单几步就能动起来)/&title=[译]动画矢量图"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://qiantao94.github.io/2016/11/30/[译]动画矢量图(简单几步就能动起来)/&name=[译]动画矢量图&description=&lt;p&gt;简单几步就能动起来&lt;br&gt;"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2019 qiantao
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">主页</a></li>
         
          <li><a href="/archives/">列表</a></li>
         
          <li><a href="/emmm/">牢骚</a></li>
         
          <li><a href="/about/">我</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/fontawesome-all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-120844447-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Baidu Analytics -->

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'Salama';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


